"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    matchStatementModuloBrackets: function() {
        return matchStatementModuloBrackets;
    },
    bracketedStatementNodeFromStatementNode: function() {
        return bracketedStatementNodeFromStatementNode;
    }
});
var _matcher = require("../matcher");
var _query = require("./query");
var _array = require("./array");
var _ruleNames = require("../ruleNames");
var _constants = require("../constants");
var statementNodeQuery = (0, _query.nodeQuery)("/metaArgument/statement!");
function matchStatementModuloBrackets(statementNodeA, statementNodeB) {
    var statementMatchesModuloBrackets = false;
    if (!statementMatchesModuloBrackets) {
        var nonTerminalNodeA = statementNodeA, nonTerminalNodeB = statementNodeB, nonTerminalNodeMatches = _matcher.matcher.matchNonTerminalNode(nonTerminalNodeA, nonTerminalNodeB);
        statementMatchesModuloBrackets = nonTerminalNodeMatches; ///
    }
    if (!statementMatchesModuloBrackets) {
        var bracketedStatementNodeA = bracketedStatementNodeFromStatementNode(statementNodeA);
        if (bracketedStatementNodeA !== null) {
            var _$statementNodeA = bracketedStatementNodeA, nodeA = _$statementNodeA, nodeB = statementNodeB, nodeMatches = _matcher.matcher.matchNode(nodeA, nodeB);
            statementMatchesModuloBrackets = nodeMatches; ///
        }
    }
    if (!statementMatchesModuloBrackets) {
        var bracketedStatementNodeB = bracketedStatementNodeFromStatementNode(statementNodeB);
        if (bracketedStatementNodeB !== null) {
            var _$statementNodeB = bracketedStatementNodeB, nodeA1 = statementNodeA, nodeB1 = _$statementNodeB, nodeMatches1 = _matcher.matcher.matchNode(nodeA1, nodeB1);
            statementMatchesModuloBrackets = nodeMatches1; ///
        }
    }
    return statementMatchesModuloBrackets;
}
function bracketedStatementNodeFromStatementNode(statementNode) {
    var bracketedStatementNode = null;
    var nonTerminalNode = statementNode, childNodes = nonTerminalNode.getChildNodes(), childNodesLength = childNodes.length;
    if (childNodesLength === _constants.BRACKETED_CHILD_NODES_LENGTH) {
        var firstChildNode = (0, _array.first)(childNodes), thirdChildNode = (0, _array.third)(childNodes), secondChildNode = (0, _array.second)(childNodes), firstChildNodeTerminalNode = firstChildNode.isTerminalNode(), thirdChildNodeTerminalNode = thirdChildNode.isTerminalNode(), secondChildNodeNonTerminalNode = secondChildNode.isNonTerminalNode();
        if (firstChildNodeTerminalNode && secondChildNodeNonTerminalNode && thirdChildNodeTerminalNode) {
            var nonTerminalNode1 = secondChildNode, firstTerminalNode = firstChildNode, secondTerminalNode = thirdChildNode, nonTerminalNodeRuleName = nonTerminalNode1.getRuleName(), firstTerminalNodeContent = firstTerminalNode.getContent(), secondTerminalNodeContent = secondTerminalNode.getContent(), firstTerminalNodeContentLeftBracket = firstTerminalNodeContent === _constants.LEFT_BRACKET, secondTerminalNodeContentRightBracket = secondTerminalNodeContent === _constants.RIGHT_BRACKET, nonTerminalNodeRuleNameMetaArgumentRuleName = nonTerminalNodeRuleName === _ruleNames.META_ARGUMENT_RULE_NAME;
            if (nonTerminalNodeRuleNameMetaArgumentRuleName && firstTerminalNodeContentLeftBracket && secondTerminalNodeContentRightBracket) {
                var metaArgumentNode = nonTerminalNode1, _$statementNode = statementNodeQuery(metaArgumentNode);
                if (_$statementNode !== null) {
                    bracketedStatementNode = _$statementNode; ///
                }
            }
        }
    }
    return bracketedStatementNode;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvcHJvb2YuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IG1hdGNoZXIgfSBmcm9tIFwiLi4vbWF0Y2hlclwiO1xuaW1wb3J0IHsgbm9kZVF1ZXJ5IH0gZnJvbSBcIi4vcXVlcnlcIjtcbmltcG9ydCB7IGZpcnN0LCBzZWNvbmQsIHRoaXJkIH0gZnJvbSBcIi4vYXJyYXlcIjtcbmltcG9ydCB7IE1FVEFfQVJHVU1FTlRfUlVMRV9OQU1FIH0gZnJvbSBcIi4uL3J1bGVOYW1lc1wiO1xuaW1wb3J0IHsgTEVGVF9CUkFDS0VULCBSSUdIVF9CUkFDS0VULCBCUkFDS0VURURfQ0hJTERfTk9ERVNfTEVOR1RIIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG5jb25zdCBzdGF0ZW1lbnROb2RlUXVlcnkgPSBub2RlUXVlcnkoJy9tZXRhQXJndW1lbnQvc3RhdGVtZW50IScpO1xuXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hTdGF0ZW1lbnRNb2R1bG9CcmFja2V0cyhzdGF0ZW1lbnROb2RlQSwgc3RhdGVtZW50Tm9kZUIpIHtcbiAgbGV0IHN0YXRlbWVudE1hdGNoZXNNb2R1bG9CcmFja2V0cyA9IGZhbHNlO1xuXG4gIGlmICghc3RhdGVtZW50TWF0Y2hlc01vZHVsb0JyYWNrZXRzKSB7XG4gICAgY29uc3Qgbm9uVGVybWluYWxOb2RlQSA9IHN0YXRlbWVudE5vZGVBLCAgLy8vXG4gICAgICAgICAgbm9uVGVybWluYWxOb2RlQiA9IHN0YXRlbWVudE5vZGVCLCAgLy8vXG4gICAgICAgICAgbm9uVGVybWluYWxOb2RlTWF0Y2hlcyA9IG1hdGNoZXIubWF0Y2hOb25UZXJtaW5hbE5vZGUobm9uVGVybWluYWxOb2RlQSwgbm9uVGVybWluYWxOb2RlQik7XG5cbiAgICBzdGF0ZW1lbnRNYXRjaGVzTW9kdWxvQnJhY2tldHMgPSBub25UZXJtaW5hbE5vZGVNYXRjaGVzOyAgLy8vXG4gIH1cblxuICBpZiAoIXN0YXRlbWVudE1hdGNoZXNNb2R1bG9CcmFja2V0cykge1xuICAgIGNvbnN0IGJyYWNrZXRlZFN0YXRlbWVudE5vZGVBID0gYnJhY2tldGVkU3RhdGVtZW50Tm9kZUZyb21TdGF0ZW1lbnROb2RlKHN0YXRlbWVudE5vZGVBKTtcblxuICAgIGlmIChicmFja2V0ZWRTdGF0ZW1lbnROb2RlQSAhPT0gbnVsbCkge1xuICAgICAgY29uc3Qgc3RhdGVtZW50Tm9kZUEgPSBicmFja2V0ZWRTdGF0ZW1lbnROb2RlQSxcbiAgICAgICAgICAgIG5vZGVBID0gc3RhdGVtZW50Tm9kZUEsIC8vL1xuICAgICAgICAgICAgbm9kZUIgPSBzdGF0ZW1lbnROb2RlQiwgLy8vXG4gICAgICAgICAgICBub2RlTWF0Y2hlcyA9IG1hdGNoZXIubWF0Y2hOb2RlKG5vZGVBLCBub2RlQik7XG5cbiAgICAgIHN0YXRlbWVudE1hdGNoZXNNb2R1bG9CcmFja2V0cyA9IG5vZGVNYXRjaGVzOyAvLy9cbiAgICB9XG4gIH1cblxuICBpZiAoIXN0YXRlbWVudE1hdGNoZXNNb2R1bG9CcmFja2V0cykge1xuICAgIGNvbnN0IGJyYWNrZXRlZFN0YXRlbWVudE5vZGVCID0gYnJhY2tldGVkU3RhdGVtZW50Tm9kZUZyb21TdGF0ZW1lbnROb2RlKHN0YXRlbWVudE5vZGVCKTtcblxuICAgIGlmIChicmFja2V0ZWRTdGF0ZW1lbnROb2RlQiAhPT0gbnVsbCkge1xuICAgICAgY29uc3Qgc3RhdGVtZW50Tm9kZUIgPSBicmFja2V0ZWRTdGF0ZW1lbnROb2RlQiwgLy8vXG4gICAgICAgICAgICBub2RlQSA9IHN0YXRlbWVudE5vZGVBLCAvLy9cbiAgICAgICAgICAgIG5vZGVCID0gc3RhdGVtZW50Tm9kZUIsIC8vL1xuICAgICAgICAgICAgbm9kZU1hdGNoZXMgPSBtYXRjaGVyLm1hdGNoTm9kZShub2RlQSwgbm9kZUIpO1xuXG4gICAgICBzdGF0ZW1lbnRNYXRjaGVzTW9kdWxvQnJhY2tldHMgPSBub2RlTWF0Y2hlczsgLy8vXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN0YXRlbWVudE1hdGNoZXNNb2R1bG9CcmFja2V0cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJyYWNrZXRlZFN0YXRlbWVudE5vZGVGcm9tU3RhdGVtZW50Tm9kZShzdGF0ZW1lbnROb2RlKSB7XG4gIGxldCBicmFja2V0ZWRTdGF0ZW1lbnROb2RlID0gbnVsbDtcblxuICBjb25zdCBub25UZXJtaW5hbE5vZGUgPSBzdGF0ZW1lbnROb2RlLCAgLy8vXG4gICAgICAgIGNoaWxkTm9kZXMgPSBub25UZXJtaW5hbE5vZGUuZ2V0Q2hpbGROb2RlcygpLFxuICAgICAgICBjaGlsZE5vZGVzTGVuZ3RoID0gY2hpbGROb2Rlcy5sZW5ndGg7XG5cbiAgaWYgKGNoaWxkTm9kZXNMZW5ndGggPT09IEJSQUNLRVRFRF9DSElMRF9OT0RFU19MRU5HVEgpIHtcbiAgICBjb25zdCBmaXJzdENoaWxkTm9kZSA9IGZpcnN0KGNoaWxkTm9kZXMpLFxuICAgICAgICAgIHRoaXJkQ2hpbGROb2RlID0gdGhpcmQoY2hpbGROb2RlcyksXG4gICAgICAgICAgc2Vjb25kQ2hpbGROb2RlID0gc2Vjb25kKGNoaWxkTm9kZXMpLFxuICAgICAgICAgIGZpcnN0Q2hpbGROb2RlVGVybWluYWxOb2RlID0gZmlyc3RDaGlsZE5vZGUuaXNUZXJtaW5hbE5vZGUoKSxcbiAgICAgICAgICB0aGlyZENoaWxkTm9kZVRlcm1pbmFsTm9kZSA9IHRoaXJkQ2hpbGROb2RlLmlzVGVybWluYWxOb2RlKCksXG4gICAgICAgICAgc2Vjb25kQ2hpbGROb2RlTm9uVGVybWluYWxOb2RlID0gc2Vjb25kQ2hpbGROb2RlLmlzTm9uVGVybWluYWxOb2RlKCk7XG5cbiAgICBpZiAoZmlyc3RDaGlsZE5vZGVUZXJtaW5hbE5vZGUgJiYgc2Vjb25kQ2hpbGROb2RlTm9uVGVybWluYWxOb2RlICYmIHRoaXJkQ2hpbGROb2RlVGVybWluYWxOb2RlKSB7XG4gICAgICBjb25zdCBub25UZXJtaW5hbE5vZGUgPSBzZWNvbmRDaGlsZE5vZGUsICAvLy9cbiAgICAgICAgICAgIGZpcnN0VGVybWluYWxOb2RlID0gZmlyc3RDaGlsZE5vZGUsIC8vL1xuICAgICAgICAgICAgc2Vjb25kVGVybWluYWxOb2RlID0gdGhpcmRDaGlsZE5vZGUsICAvLy9cbiAgICAgICAgICAgIG5vblRlcm1pbmFsTm9kZVJ1bGVOYW1lID0gbm9uVGVybWluYWxOb2RlLmdldFJ1bGVOYW1lKCksXG4gICAgICAgICAgICBmaXJzdFRlcm1pbmFsTm9kZUNvbnRlbnQgPSBmaXJzdFRlcm1pbmFsTm9kZS5nZXRDb250ZW50KCksXG4gICAgICAgICAgICBzZWNvbmRUZXJtaW5hbE5vZGVDb250ZW50ID0gc2Vjb25kVGVybWluYWxOb2RlLmdldENvbnRlbnQoKSxcbiAgICAgICAgICAgIGZpcnN0VGVybWluYWxOb2RlQ29udGVudExlZnRCcmFja2V0ID0gKGZpcnN0VGVybWluYWxOb2RlQ29udGVudCA9PT0gTEVGVF9CUkFDS0VUKSxcbiAgICAgICAgICAgIHNlY29uZFRlcm1pbmFsTm9kZUNvbnRlbnRSaWdodEJyYWNrZXQgPSAoc2Vjb25kVGVybWluYWxOb2RlQ29udGVudCA9PT0gUklHSFRfQlJBQ0tFVCksXG4gICAgICAgICAgICBub25UZXJtaW5hbE5vZGVSdWxlTmFtZU1ldGFBcmd1bWVudFJ1bGVOYW1lID0gKG5vblRlcm1pbmFsTm9kZVJ1bGVOYW1lID09PSBNRVRBX0FSR1VNRU5UX1JVTEVfTkFNRSk7XG5cbiAgICAgIGlmIChub25UZXJtaW5hbE5vZGVSdWxlTmFtZU1ldGFBcmd1bWVudFJ1bGVOYW1lICYmIGZpcnN0VGVybWluYWxOb2RlQ29udGVudExlZnRCcmFja2V0ICYmIHNlY29uZFRlcm1pbmFsTm9kZUNvbnRlbnRSaWdodEJyYWNrZXQpIHtcbiAgICAgICAgY29uc3QgbWV0YUFyZ3VtZW50Tm9kZSA9IG5vblRlcm1pbmFsTm9kZSwgLy8vXG4gICAgICAgICAgICAgIHN0YXRlbWVudE5vZGUgPSBzdGF0ZW1lbnROb2RlUXVlcnkobWV0YUFyZ3VtZW50Tm9kZSk7XG5cbiAgICAgICAgaWYgKHN0YXRlbWVudE5vZGUgIT09IG51bGwpIHtcbiAgICAgICAgICBicmFja2V0ZWRTdGF0ZW1lbnROb2RlID0gc3RhdGVtZW50Tm9kZTsgIC8vL1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJyYWNrZXRlZFN0YXRlbWVudE5vZGU7XG59XG4iXSwibmFtZXMiOlsibWF0Y2hTdGF0ZW1lbnRNb2R1bG9CcmFja2V0cyIsImJyYWNrZXRlZFN0YXRlbWVudE5vZGVGcm9tU3RhdGVtZW50Tm9kZSIsInN0YXRlbWVudE5vZGVRdWVyeSIsIm5vZGVRdWVyeSIsInN0YXRlbWVudE5vZGVBIiwic3RhdGVtZW50Tm9kZUIiLCJzdGF0ZW1lbnRNYXRjaGVzTW9kdWxvQnJhY2tldHMiLCJub25UZXJtaW5hbE5vZGVBIiwibm9uVGVybWluYWxOb2RlQiIsIm5vblRlcm1pbmFsTm9kZU1hdGNoZXMiLCJtYXRjaGVyIiwibWF0Y2hOb25UZXJtaW5hbE5vZGUiLCJicmFja2V0ZWRTdGF0ZW1lbnROb2RlQSIsIm5vZGVBIiwibm9kZUIiLCJub2RlTWF0Y2hlcyIsIm1hdGNoTm9kZSIsImJyYWNrZXRlZFN0YXRlbWVudE5vZGVCIiwic3RhdGVtZW50Tm9kZSIsImJyYWNrZXRlZFN0YXRlbWVudE5vZGUiLCJub25UZXJtaW5hbE5vZGUiLCJjaGlsZE5vZGVzIiwiZ2V0Q2hpbGROb2RlcyIsImNoaWxkTm9kZXNMZW5ndGgiLCJsZW5ndGgiLCJCUkFDS0VURURfQ0hJTERfTk9ERVNfTEVOR1RIIiwiZmlyc3RDaGlsZE5vZGUiLCJmaXJzdCIsInRoaXJkQ2hpbGROb2RlIiwidGhpcmQiLCJzZWNvbmRDaGlsZE5vZGUiLCJzZWNvbmQiLCJmaXJzdENoaWxkTm9kZVRlcm1pbmFsTm9kZSIsImlzVGVybWluYWxOb2RlIiwidGhpcmRDaGlsZE5vZGVUZXJtaW5hbE5vZGUiLCJzZWNvbmRDaGlsZE5vZGVOb25UZXJtaW5hbE5vZGUiLCJpc05vblRlcm1pbmFsTm9kZSIsImZpcnN0VGVybWluYWxOb2RlIiwic2Vjb25kVGVybWluYWxOb2RlIiwibm9uVGVybWluYWxOb2RlUnVsZU5hbWUiLCJnZXRSdWxlTmFtZSIsImZpcnN0VGVybWluYWxOb2RlQ29udGVudCIsImdldENvbnRlbnQiLCJzZWNvbmRUZXJtaW5hbE5vZGVDb250ZW50IiwiZmlyc3RUZXJtaW5hbE5vZGVDb250ZW50TGVmdEJyYWNrZXQiLCJMRUZUX0JSQUNLRVQiLCJzZWNvbmRUZXJtaW5hbE5vZGVDb250ZW50UmlnaHRCcmFja2V0IiwiUklHSFRfQlJBQ0tFVCIsIm5vblRlcm1pbmFsTm9kZVJ1bGVOYW1lTWV0YUFyZ3VtZW50UnVsZU5hbWUiLCJNRVRBX0FSR1VNRU5UX1JVTEVfTkFNRSIsIm1ldGFBcmd1bWVudE5vZGUiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztJQVVnQkEsNEJBQTRCO2VBQTVCQTs7SUF3Q0FDLHVDQUF1QztlQUF2Q0E7Ozt1QkFoRFE7cUJBQ0U7cUJBQ1c7eUJBQ0c7eUJBQ2tDO0FBRTFFLElBQU1DLHFCQUFxQkMsSUFBQUEsZ0JBQVMsRUFBQztBQUU5QixTQUFTSCw2QkFBNkJJLGNBQWMsRUFBRUMsY0FBYyxFQUFFO0lBQzNFLElBQUlDLGlDQUFpQyxLQUFLO0lBRTFDLElBQUksQ0FBQ0EsZ0NBQWdDO1FBQ25DLElBQU1DLG1CQUFtQkgsZ0JBQ25CSSxtQkFBbUJILGdCQUNuQkkseUJBQXlCQyxnQkFBTyxDQUFDQyxvQkFBb0IsQ0FBQ0osa0JBQWtCQztRQUU5RUYsaUNBQWlDRyx3QkFBeUIsR0FBRztJQUMvRCxDQUFDO0lBRUQsSUFBSSxDQUFDSCxnQ0FBZ0M7UUFDbkMsSUFBTU0sMEJBQTBCWCx3Q0FBd0NHO1FBRXhFLElBQUlRLDRCQUE0QixJQUFJLEVBQUU7WUFDcEMsSUFBTVIsbUJBQWlCUSx5QkFDakJDLFFBQVFULGtCQUNSVSxRQUFRVCxnQkFDUlUsY0FBY0wsZ0JBQU8sQ0FBQ00sU0FBUyxDQUFDSCxPQUFPQztZQUU3Q1IsaUNBQWlDUyxhQUFhLEdBQUc7UUFDbkQsQ0FBQztJQUNILENBQUM7SUFFRCxJQUFJLENBQUNULGdDQUFnQztRQUNuQyxJQUFNVywwQkFBMEJoQix3Q0FBd0NJO1FBRXhFLElBQUlZLDRCQUE0QixJQUFJLEVBQUU7WUFDcEMsSUFBTVosbUJBQWlCWSx5QkFDakJKLFNBQVFULGdCQUNSVSxTQUFRVCxrQkFDUlUsZUFBY0wsZ0JBQU8sQ0FBQ00sU0FBUyxDQUFDSCxRQUFPQztZQUU3Q1IsaUNBQWlDUyxjQUFhLEdBQUc7UUFDbkQsQ0FBQztJQUNILENBQUM7SUFFRCxPQUFPVDtBQUNUO0FBRU8sU0FBU0wsd0NBQXdDaUIsYUFBYSxFQUFFO0lBQ3JFLElBQUlDLHlCQUF5QixJQUFJO0lBRWpDLElBQU1DLGtCQUFrQkYsZUFDbEJHLGFBQWFELGdCQUFnQkUsYUFBYSxJQUMxQ0MsbUJBQW1CRixXQUFXRyxNQUFNO0lBRTFDLElBQUlELHFCQUFxQkUsdUNBQTRCLEVBQUU7UUFDckQsSUFBTUMsaUJBQWlCQyxJQUFBQSxZQUFLLEVBQUNOLGFBQ3ZCTyxpQkFBaUJDLElBQUFBLFlBQUssRUFBQ1IsYUFDdkJTLGtCQUFrQkMsSUFBQUEsYUFBTSxFQUFDVixhQUN6QlcsNkJBQTZCTixlQUFlTyxjQUFjLElBQzFEQyw2QkFBNkJOLGVBQWVLLGNBQWMsSUFDMURFLGlDQUFpQ0wsZ0JBQWdCTSxpQkFBaUI7UUFFeEUsSUFBSUosOEJBQThCRyxrQ0FBa0NELDRCQUE0QjtZQUM5RixJQUFNZCxtQkFBa0JVLGlCQUNsQk8sb0JBQW9CWCxnQkFDcEJZLHFCQUFxQlYsZ0JBQ3JCVywwQkFBMEJuQixpQkFBZ0JvQixXQUFXLElBQ3JEQywyQkFBMkJKLGtCQUFrQkssVUFBVSxJQUN2REMsNEJBQTRCTCxtQkFBbUJJLFVBQVUsSUFDekRFLHNDQUF1Q0gsNkJBQTZCSSx1QkFBWSxFQUNoRkMsd0NBQXlDSCw4QkFBOEJJLHdCQUFhLEVBQ3BGQyw4Q0FBK0NULDRCQUE0QlUsa0NBQXVCO1lBRXhHLElBQUlELCtDQUErQ0osdUNBQXVDRSx1Q0FBdUM7Z0JBQy9ILElBQU1JLG1CQUFtQjlCLGtCQUNuQkYsa0JBQWdCaEIsbUJBQW1CZ0Q7Z0JBRXpDLElBQUloQyxvQkFBa0IsSUFBSSxFQUFFO29CQUMxQkMseUJBQXlCRCxpQkFBZ0IsR0FBRztnQkFDOUMsQ0FBQztZQUNILENBQUM7UUFDSCxDQUFDO0lBQ0gsQ0FBQztJQUVELE9BQU9DO0FBQ1QifQ==