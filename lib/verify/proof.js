"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return verifyProof;
    }
});
var _local = /*#__PURE__*/ _interop_require_default(require("../context/local"));
var _derivation = /*#__PURE__*/ _interop_require_default(require("../verify/derivation"));
var _query = require("../utilities/query");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
var derivationNodeQuery = (0, _query.nodeQuery)("/proof/derivation!");
function verifyProof(proofNode, statementNode, substitutions, localContext) {
    var proofVerified = false;
    localContext = _local.default.fromLocalContext(localContext); ///
    var derivationNode = derivationNodeQuery(proofNode), derivationVerified = (0, _derivation.default)(derivationNode, substitutions, localContext);
    if (derivationVerified) {
        var lastProofStep = localContext.getLastProofStep();
        if (lastProofStep !== null) {
            var lastProofStepStatementNode = lastProofStep.getStatementNode(), lastStatementNode = lastProofStepStatementNode, statementNodeMatchesLastStatementNode = statementNode.match(lastStatementNode);
            proofVerified = statementNodeMatchesLastStatementNode; ///
        }
    }
    return proofVerified;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92ZXJpZnkvcHJvb2YuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBMb2NhbENvbnRleHQgZnJvbSBcIi4uL2NvbnRleHQvbG9jYWxcIjtcbmltcG9ydCB2ZXJpZnlEZXJpdmF0aW9uIGZyb20gXCIuLi92ZXJpZnkvZGVyaXZhdGlvblwiO1xuXG5pbXBvcnQgeyBub2RlUXVlcnkgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL3F1ZXJ5XCI7XG5cbmNvbnN0IGRlcml2YXRpb25Ob2RlUXVlcnkgPSBub2RlUXVlcnkoXCIvcHJvb2YvZGVyaXZhdGlvbiFcIik7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHZlcmlmeVByb29mKHByb29mTm9kZSwgc3RhdGVtZW50Tm9kZSwgc3Vic3RpdHV0aW9ucywgbG9jYWxDb250ZXh0KSB7XG4gIGxldCBwcm9vZlZlcmlmaWVkID0gZmFsc2U7XG5cbiAgbG9jYWxDb250ZXh0ID0gTG9jYWxDb250ZXh0LmZyb21Mb2NhbENvbnRleHQobG9jYWxDb250ZXh0KTsgLy8vXG5cbiAgY29uc3QgZGVyaXZhdGlvbk5vZGUgPSBkZXJpdmF0aW9uTm9kZVF1ZXJ5KHByb29mTm9kZSksXG4gICAgICAgIGRlcml2YXRpb25WZXJpZmllZCA9IHZlcmlmeURlcml2YXRpb24oZGVyaXZhdGlvbk5vZGUsIHN1YnN0aXR1dGlvbnMsIGxvY2FsQ29udGV4dCk7XG5cbiAgaWYgKGRlcml2YXRpb25WZXJpZmllZCkge1xuICAgIGNvbnN0IGxhc3RQcm9vZlN0ZXAgPSBsb2NhbENvbnRleHQuZ2V0TGFzdFByb29mU3RlcCgpO1xuXG4gICAgaWYgKGxhc3RQcm9vZlN0ZXAgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGxhc3RQcm9vZlN0ZXBTdGF0ZW1lbnROb2RlID0gbGFzdFByb29mU3RlcC5nZXRTdGF0ZW1lbnROb2RlKCksXG4gICAgICAgICAgICBsYXN0U3RhdGVtZW50Tm9kZSA9IGxhc3RQcm9vZlN0ZXBTdGF0ZW1lbnROb2RlLCAvLy9cbiAgICAgICAgICAgIHN0YXRlbWVudE5vZGVNYXRjaGVzTGFzdFN0YXRlbWVudE5vZGUgPSBzdGF0ZW1lbnROb2RlLm1hdGNoKGxhc3RTdGF0ZW1lbnROb2RlKTtcblxuICAgICAgcHJvb2ZWZXJpZmllZCA9IHN0YXRlbWVudE5vZGVNYXRjaGVzTGFzdFN0YXRlbWVudE5vZGU7ICAvLy9cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcHJvb2ZWZXJpZmllZDtcbn1cbiJdLCJuYW1lcyI6WyJ2ZXJpZnlQcm9vZiIsImRlcml2YXRpb25Ob2RlUXVlcnkiLCJub2RlUXVlcnkiLCJwcm9vZk5vZGUiLCJzdGF0ZW1lbnROb2RlIiwic3Vic3RpdHV0aW9ucyIsImxvY2FsQ29udGV4dCIsInByb29mVmVyaWZpZWQiLCJMb2NhbENvbnRleHQiLCJmcm9tTG9jYWxDb250ZXh0IiwiZGVyaXZhdGlvbk5vZGUiLCJkZXJpdmF0aW9uVmVyaWZpZWQiLCJ2ZXJpZnlEZXJpdmF0aW9uIiwibGFzdFByb29mU3RlcCIsImdldExhc3RQcm9vZlN0ZXAiLCJsYXN0UHJvb2ZTdGVwU3RhdGVtZW50Tm9kZSIsImdldFN0YXRlbWVudE5vZGUiLCJsYXN0U3RhdGVtZW50Tm9kZSIsInN0YXRlbWVudE5vZGVNYXRjaGVzTGFzdFN0YXRlbWVudE5vZGUiLCJtYXRjaCJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7K0JBU0E7OztlQUF3QkE7Ozs0REFQQztpRUFDSTtxQkFFSDs7Ozs7O0FBRTFCLElBQU1DLHNCQUFzQkMsSUFBQUEsZ0JBQVMsRUFBQztBQUV2QixTQUFTRixZQUFZRyxTQUFTLEVBQUVDLGFBQWEsRUFBRUMsYUFBYSxFQUFFQyxZQUFZO0lBQ3ZGLElBQUlDLGdCQUFnQjtJQUVwQkQsZUFBZUUsY0FBWSxDQUFDQyxnQkFBZ0IsQ0FBQ0gsZUFBZSxHQUFHO0lBRS9ELElBQU1JLGlCQUFpQlQsb0JBQW9CRSxZQUNyQ1EscUJBQXFCQyxJQUFBQSxtQkFBZ0IsRUFBQ0YsZ0JBQWdCTCxlQUFlQztJQUUzRSxJQUFJSyxvQkFBb0I7UUFDdEIsSUFBTUUsZ0JBQWdCUCxhQUFhUSxnQkFBZ0I7UUFFbkQsSUFBSUQsa0JBQWtCLE1BQU07WUFDMUIsSUFBTUUsNkJBQTZCRixjQUFjRyxnQkFBZ0IsSUFDM0RDLG9CQUFvQkYsNEJBQ3BCRyx3Q0FBd0NkLGNBQWNlLEtBQUssQ0FBQ0Y7WUFFbEVWLGdCQUFnQlcsdUNBQXdDLEdBQUc7UUFDN0Q7SUFDRjtJQUVBLE9BQU9YO0FBQ1QifQ==