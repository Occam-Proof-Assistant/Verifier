"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
var _statement = /*#__PURE__*/ _interop_require_default(require("../../substitution/statement"));
var _string = require("../../utilities/string");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function unifyAWithRule(statement, substitutions, context) {
    var unifiedWithRule = false;
    var reference = statement.getReference(), rule = context.findRuleByReference(reference);
    if (rule !== null) {
        var ruleString = rule.getString(), statementString = (0, _string.trim)(_$statement.getString()); ///
        context.trace("Unifying the '".concat(statementString, "' statement with the '").concat(ruleString, "' rule..."));
        var _$statement = _$statement.getStatement(), proofSteps = context.getProofSteps(), statementAndProofStepsUnified = rule.unifyStatementAndProofSteps(_$statement, proofSteps, context);
        unifiedWithRule = statementAndProofStepsUnified; ///
        if (unifiedWithRule) {
            context.debug("...unified the '".concat(statementString, "' statement with the '").concat(ruleString, "' rule."));
        }
    }
    return unifiedWithRule;
}
function unifyAWithReference(statement, substitutions, context) {
    var unifiedWithReference;
    var reference = statement.getReference(), statementString = statement.getString(), referenceString = reference.getString();
    context.trace("Unifying the '".concat(statementString, "' statement with the '").concat(referenceString, "' reference..."));
    var metavariable = reference.getMetavariable(), statementSubstitution = _statement.default.fromStatementAndMetavariable(statement, metavariable, context), substitution = statementSubstitution; ///
    substitutions.addSubstitution(substitution, context);
    unifiedWithReference = true;
    if (unifiedWithReference) {
        context.debug("...unified the '".concat(statementString, "' statement with the '").concat(referenceString, "' reference."));
    }
    return unifiedWithReference;
}
function unifyAWithAxiomLemmaTheoremOrConjecture(statement, substitutions, context) {
    var unifiedWithAxiomLemmaTheoremOrConjecture = false;
    var reference = statement.getReference(), axiom = context.findAxiomByReference(reference), lemma = context.findLemmaByReference(reference), theorem = context.findTheoremByReference(reference), conjecture = context.findConjectureByReference(reference), axiomLemmaTheoremConjecture = axiom || lemma || theorem || conjecture;
    if (axiomLemmaTheoremConjecture !== null) {
        var statementString = (0, _string.trim)(_$statement.getString()), axiomLemmaTheoremConjectureString = reference.getString();
        context.trace("Unifying the '".concat(statementString, "' statement with the '").concat(axiomLemmaTheoremConjectureString, "' axiom, lemma, theorem or conjecture..."));
        var _$statement = _$statement.getStatement(), proofSteps = context.getProofSteps(), statementAndProofStepsUnified = axiomLemmaTheoremConjecture.unifyStatementAndProofSteps(_$statement, proofSteps, context);
        if (statementAndProofStepsUnified) {
            var metavariable = reference.getMetavariable(), statementSubstitution = _statement.default.fromStatementAndMetavariable(_$statement, metavariable, context), substitution = statementSubstitution; ///
            substitutions.addSubstitution(substitution, context);
            unifiedWithAxiomLemmaTheoremOrConjecture = true;
        }
        if (unifiedWithAxiomLemmaTheoremOrConjecture) {
            context.debug("...unified the '".concat(statementString, "' statement with the '").concat(axiomLemmaTheoremConjectureString, "' axiom, lemma, theorem or conjecture."));
        }
    }
    return unifiedWithAxiomLemmaTheoremOrConjecture;
}
var unifyMixins = [
    unifyAWithRule,
    unifyAWithReference,
    unifyAWithAxiomLemmaTheoremOrConjecture
];
var _default = unifyMixins;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9taXhpbnMvcHJvb2ZTdGVwL3VuaWZ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgU3RhdGVtZW50U3Vic3RpdHV0aW9uIGZyb20gXCIuLi8uLi9zdWJzdGl0dXRpb24vc3RhdGVtZW50XCI7XG5cbmltcG9ydCB7IHRyaW0gfSBmcm9tIFwiLi4vLi4vdXRpbGl0aWVzL3N0cmluZ1wiO1xuXG5mdW5jdGlvbiB1bmlmeUFXaXRoUnVsZShzdGF0ZW1lbnQsIHN1YnN0aXR1dGlvbnMsIGNvbnRleHQpIHtcbiAgbGV0IHVuaWZpZWRXaXRoUnVsZSA9IGZhbHNlO1xuXG4gIGNvbnN0IHJlZmVyZW5jZSA9IHN0YXRlbWVudC5nZXRSZWZlcmVuY2UoKSxcbiAgICAgICAgcnVsZSA9IGNvbnRleHQuZmluZFJ1bGVCeVJlZmVyZW5jZShyZWZlcmVuY2UpO1xuXG4gIGlmIChydWxlICE9PSBudWxsKSB7XG4gICAgY29uc3QgcnVsZVN0cmluZyA9IHJ1bGUuZ2V0U3RyaW5nKCksXG4gICAgICAgICAgc3RhdGVtZW50U3RyaW5nID0gdHJpbShzdGF0ZW1lbnQuZ2V0U3RyaW5nKCkpOyAgLy8vXG5cbiAgICBjb250ZXh0LnRyYWNlKGBVbmlmeWluZyB0aGUgJyR7c3RhdGVtZW50U3RyaW5nfScgc3RhdGVtZW50IHdpdGggdGhlICcke3J1bGVTdHJpbmd9JyBydWxlLi4uYCk7XG5cbiAgICBjb25zdCBzdGF0ZW1lbnQgPSBzdGF0ZW1lbnQuZ2V0U3RhdGVtZW50KCksXG4gICAgICAgICAgcHJvb2ZTdGVwcyA9IGNvbnRleHQuZ2V0UHJvb2ZTdGVwcygpLFxuICAgICAgICAgIHN0YXRlbWVudEFuZFByb29mU3RlcHNVbmlmaWVkID0gcnVsZS51bmlmeVN0YXRlbWVudEFuZFByb29mU3RlcHMoc3RhdGVtZW50LCBwcm9vZlN0ZXBzLCBjb250ZXh0KTtcblxuICAgIHVuaWZpZWRXaXRoUnVsZSA9IHN0YXRlbWVudEFuZFByb29mU3RlcHNVbmlmaWVkOyAgLy8vXG5cbiAgICBpZiAodW5pZmllZFdpdGhSdWxlKSB7XG4gICAgICBjb250ZXh0LmRlYnVnKGAuLi51bmlmaWVkIHRoZSAnJHtzdGF0ZW1lbnRTdHJpbmd9JyBzdGF0ZW1lbnQgd2l0aCB0aGUgJyR7cnVsZVN0cmluZ30nIHJ1bGUuYCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuaWZpZWRXaXRoUnVsZTtcbn1cblxuZnVuY3Rpb24gdW5pZnlBV2l0aFJlZmVyZW5jZShzdGF0ZW1lbnQsIHN1YnN0aXR1dGlvbnMsIGNvbnRleHQpIHtcbiAgbGV0IHVuaWZpZWRXaXRoUmVmZXJlbmNlO1xuXG4gIGNvbnN0IHJlZmVyZW5jZSA9IHN0YXRlbWVudC5nZXRSZWZlcmVuY2UoKSxcbiAgICAgICAgc3RhdGVtZW50U3RyaW5nID0gc3RhdGVtZW50LmdldFN0cmluZygpLFxuICAgICAgICByZWZlcmVuY2VTdHJpbmcgPSByZWZlcmVuY2UuZ2V0U3RyaW5nKCk7XG5cbiAgY29udGV4dC50cmFjZShgVW5pZnlpbmcgdGhlICcke3N0YXRlbWVudFN0cmluZ30nIHN0YXRlbWVudCB3aXRoIHRoZSAnJHtyZWZlcmVuY2VTdHJpbmd9JyByZWZlcmVuY2UuLi5gKTtcblxuICBjb25zdCBtZXRhdmFyaWFibGUgPSByZWZlcmVuY2UuZ2V0TWV0YXZhcmlhYmxlKCksXG4gICAgICAgIHN0YXRlbWVudFN1YnN0aXR1dGlvbiA9IFN0YXRlbWVudFN1YnN0aXR1dGlvbi5mcm9tU3RhdGVtZW50QW5kTWV0YXZhcmlhYmxlKHN0YXRlbWVudCwgbWV0YXZhcmlhYmxlLCBjb250ZXh0KSxcbiAgICAgICAgc3Vic3RpdHV0aW9uID0gc3RhdGVtZW50U3Vic3RpdHV0aW9uOyAvLy9cblxuICBzdWJzdGl0dXRpb25zLmFkZFN1YnN0aXR1dGlvbihzdWJzdGl0dXRpb24sIGNvbnRleHQpO1xuXG4gIHVuaWZpZWRXaXRoUmVmZXJlbmNlID0gdHJ1ZTtcblxuICBpZiAodW5pZmllZFdpdGhSZWZlcmVuY2UpIHtcbiAgICBjb250ZXh0LmRlYnVnKGAuLi51bmlmaWVkIHRoZSAnJHtzdGF0ZW1lbnRTdHJpbmd9JyBzdGF0ZW1lbnQgd2l0aCB0aGUgJyR7cmVmZXJlbmNlU3RyaW5nfScgcmVmZXJlbmNlLmApO1xuICB9XG5cbiAgcmV0dXJuIHVuaWZpZWRXaXRoUmVmZXJlbmNlO1xufVxuXG5mdW5jdGlvbiB1bmlmeUFXaXRoQXhpb21MZW1tYVRoZW9yZW1PckNvbmplY3R1cmUoc3RhdGVtZW50LCBzdWJzdGl0dXRpb25zLCBjb250ZXh0KSB7XG4gIGxldCB1bmlmaWVkV2l0aEF4aW9tTGVtbWFUaGVvcmVtT3JDb25qZWN0dXJlID0gZmFsc2U7XG5cbiAgY29uc3QgcmVmZXJlbmNlID0gc3RhdGVtZW50LmdldFJlZmVyZW5jZSgpLFxuICAgICAgICBheGlvbSA9IGNvbnRleHQuZmluZEF4aW9tQnlSZWZlcmVuY2UocmVmZXJlbmNlKSxcbiAgICAgICAgbGVtbWEgPSBjb250ZXh0LmZpbmRMZW1tYUJ5UmVmZXJlbmNlKHJlZmVyZW5jZSksXG4gICAgICAgIHRoZW9yZW0gPSBjb250ZXh0LmZpbmRUaGVvcmVtQnlSZWZlcmVuY2UocmVmZXJlbmNlKSxcbiAgICAgICAgY29uamVjdHVyZSA9IGNvbnRleHQuZmluZENvbmplY3R1cmVCeVJlZmVyZW5jZShyZWZlcmVuY2UpLFxuICAgICAgICBheGlvbUxlbW1hVGhlb3JlbUNvbmplY3R1cmUgPSAoYXhpb20gfHwgbGVtbWEgfHwgdGhlb3JlbSB8fCBjb25qZWN0dXJlKTtcblxuICBpZiAoYXhpb21MZW1tYVRoZW9yZW1Db25qZWN0dXJlICE9PSBudWxsKSB7XG4gICAgY29uc3Qgc3RhdGVtZW50U3RyaW5nID0gdHJpbShzdGF0ZW1lbnQuZ2V0U3RyaW5nKCkpLCAgLy8vXG4gICAgICAgICAgYXhpb21MZW1tYVRoZW9yZW1Db25qZWN0dXJlU3RyaW5nID0gcmVmZXJlbmNlLmdldFN0cmluZygpO1xuXG4gICAgY29udGV4dC50cmFjZShgVW5pZnlpbmcgdGhlICcke3N0YXRlbWVudFN0cmluZ30nIHN0YXRlbWVudCB3aXRoIHRoZSAnJHtheGlvbUxlbW1hVGhlb3JlbUNvbmplY3R1cmVTdHJpbmd9JyBheGlvbSwgbGVtbWEsIHRoZW9yZW0gb3IgY29uamVjdHVyZS4uLmApO1xuXG4gICAgY29uc3Qgc3RhdGVtZW50ID0gc3RhdGVtZW50LmdldFN0YXRlbWVudCgpLFxuICAgICAgICAgIHByb29mU3RlcHMgPSBjb250ZXh0LmdldFByb29mU3RlcHMoKSxcbiAgICAgICAgICBzdGF0ZW1lbnRBbmRQcm9vZlN0ZXBzVW5pZmllZCA9IGF4aW9tTGVtbWFUaGVvcmVtQ29uamVjdHVyZS51bmlmeVN0YXRlbWVudEFuZFByb29mU3RlcHMoc3RhdGVtZW50LCBwcm9vZlN0ZXBzLCBjb250ZXh0KTtcblxuICAgIGlmIChzdGF0ZW1lbnRBbmRQcm9vZlN0ZXBzVW5pZmllZCkge1xuICAgICAgY29uc3QgbWV0YXZhcmlhYmxlID0gcmVmZXJlbmNlLmdldE1ldGF2YXJpYWJsZSgpLFxuICAgICAgICAgICAgc3RhdGVtZW50U3Vic3RpdHV0aW9uID0gU3RhdGVtZW50U3Vic3RpdHV0aW9uLmZyb21TdGF0ZW1lbnRBbmRNZXRhdmFyaWFibGUoc3RhdGVtZW50LCBtZXRhdmFyaWFibGUsIGNvbnRleHQpLFxuICAgICAgICAgICAgc3Vic3RpdHV0aW9uID0gc3RhdGVtZW50U3Vic3RpdHV0aW9uOyAvLy9cblxuICAgICAgc3Vic3RpdHV0aW9ucy5hZGRTdWJzdGl0dXRpb24oc3Vic3RpdHV0aW9uLCBjb250ZXh0KTtcblxuICAgICAgdW5pZmllZFdpdGhBeGlvbUxlbW1hVGhlb3JlbU9yQ29uamVjdHVyZSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHVuaWZpZWRXaXRoQXhpb21MZW1tYVRoZW9yZW1PckNvbmplY3R1cmUpIHtcbiAgICAgIGNvbnRleHQuZGVidWcoYC4uLnVuaWZpZWQgdGhlICcke3N0YXRlbWVudFN0cmluZ30nIHN0YXRlbWVudCB3aXRoIHRoZSAnJHtheGlvbUxlbW1hVGhlb3JlbUNvbmplY3R1cmVTdHJpbmd9JyBheGlvbSwgbGVtbWEsIHRoZW9yZW0gb3IgY29uamVjdHVyZS5gKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5pZmllZFdpdGhBeGlvbUxlbW1hVGhlb3JlbU9yQ29uamVjdHVyZTtcbn1cblxuY29uc3QgdW5pZnlNaXhpbnMgPSBbXG4gIHVuaWZ5QVdpdGhSdWxlLFxuICB1bmlmeUFXaXRoUmVmZXJlbmNlLFxuICB1bmlmeUFXaXRoQXhpb21MZW1tYVRoZW9yZW1PckNvbmplY3R1cmVcbl07XG5cbmV4cG9ydCBkZWZhdWx0IHVuaWZ5TWl4aW5zO1xuXG4iXSwibmFtZXMiOlsidW5pZnlBV2l0aFJ1bGUiLCJzdGF0ZW1lbnQiLCJzdWJzdGl0dXRpb25zIiwiY29udGV4dCIsInVuaWZpZWRXaXRoUnVsZSIsInJlZmVyZW5jZSIsImdldFJlZmVyZW5jZSIsInJ1bGUiLCJmaW5kUnVsZUJ5UmVmZXJlbmNlIiwicnVsZVN0cmluZyIsImdldFN0cmluZyIsInN0YXRlbWVudFN0cmluZyIsInRyaW0iLCJ0cmFjZSIsImdldFN0YXRlbWVudCIsInByb29mU3RlcHMiLCJnZXRQcm9vZlN0ZXBzIiwic3RhdGVtZW50QW5kUHJvb2ZTdGVwc1VuaWZpZWQiLCJ1bmlmeVN0YXRlbWVudEFuZFByb29mU3RlcHMiLCJkZWJ1ZyIsInVuaWZ5QVdpdGhSZWZlcmVuY2UiLCJ1bmlmaWVkV2l0aFJlZmVyZW5jZSIsInJlZmVyZW5jZVN0cmluZyIsIm1ldGF2YXJpYWJsZSIsImdldE1ldGF2YXJpYWJsZSIsInN0YXRlbWVudFN1YnN0aXR1dGlvbiIsIlN0YXRlbWVudFN1YnN0aXR1dGlvbiIsImZyb21TdGF0ZW1lbnRBbmRNZXRhdmFyaWFibGUiLCJzdWJzdGl0dXRpb24iLCJhZGRTdWJzdGl0dXRpb24iLCJ1bmlmeUFXaXRoQXhpb21MZW1tYVRoZW9yZW1PckNvbmplY3R1cmUiLCJ1bmlmaWVkV2l0aEF4aW9tTGVtbWFUaGVvcmVtT3JDb25qZWN0dXJlIiwiYXhpb20iLCJmaW5kQXhpb21CeVJlZmVyZW5jZSIsImxlbW1hIiwiZmluZExlbW1hQnlSZWZlcmVuY2UiLCJ0aGVvcmVtIiwiZmluZFRoZW9yZW1CeVJlZmVyZW5jZSIsImNvbmplY3R1cmUiLCJmaW5kQ29uamVjdHVyZUJ5UmVmZXJlbmNlIiwiYXhpb21MZW1tYVRoZW9yZW1Db25qZWN0dXJlIiwiYXhpb21MZW1tYVRoZW9yZW1Db25qZWN0dXJlU3RyaW5nIiwidW5pZnlNaXhpbnMiXSwibWFwcGluZ3MiOiJBQUFBOzs7OytCQW9HQTs7O2VBQUE7OztnRUFsR2tDO3NCQUViOzs7Ozs7QUFFckIsU0FBU0EsZUFBZUMsU0FBUyxFQUFFQyxhQUFhLEVBQUVDLE9BQU87SUFDdkQsSUFBSUMsa0JBQWtCO0lBRXRCLElBQU1DLFlBQVlKLFVBQVVLLFlBQVksSUFDbENDLE9BQU9KLFFBQVFLLG1CQUFtQixDQUFDSDtJQUV6QyxJQUFJRSxTQUFTLE1BQU07UUFDakIsSUFBTUUsYUFBYUYsS0FBS0csU0FBUyxJQUMzQkMsa0JBQWtCQyxJQUFBQSxZQUFJLEVBQUNYLFlBQVVTLFNBQVMsS0FBTSxHQUFHO1FBRXpEUCxRQUFRVSxLQUFLLENBQUMsQUFBQyxpQkFBd0RKLE9BQXhDRSxpQkFBZ0IsMEJBQW1DLE9BQVhGLFlBQVc7UUFFbEYsSUFBTVIsY0FBWUEsWUFBVWEsWUFBWSxJQUNsQ0MsYUFBYVosUUFBUWEsYUFBYSxJQUNsQ0MsZ0NBQWdDVixLQUFLVywyQkFBMkIsQ0FBQ2pCLGFBQVdjLFlBQVlaO1FBRTlGQyxrQkFBa0JhLCtCQUFnQyxHQUFHO1FBRXJELElBQUliLGlCQUFpQjtZQUNuQkQsUUFBUWdCLEtBQUssQ0FBQyxBQUFDLG1CQUEwRFYsT0FBeENFLGlCQUFnQiwwQkFBbUMsT0FBWEYsWUFBVztRQUN0RjtJQUNGO0lBRUEsT0FBT0w7QUFDVDtBQUVBLFNBQVNnQixvQkFBb0JuQixTQUFTLEVBQUVDLGFBQWEsRUFBRUMsT0FBTztJQUM1RCxJQUFJa0I7SUFFSixJQUFNaEIsWUFBWUosVUFBVUssWUFBWSxJQUNsQ0ssa0JBQWtCVixVQUFVUyxTQUFTLElBQ3JDWSxrQkFBa0JqQixVQUFVSyxTQUFTO0lBRTNDUCxRQUFRVSxLQUFLLENBQUMsQUFBQyxpQkFBd0RTLE9BQXhDWCxpQkFBZ0IsMEJBQXdDLE9BQWhCVyxpQkFBZ0I7SUFFdkYsSUFBTUMsZUFBZWxCLFVBQVVtQixlQUFlLElBQ3hDQyx3QkFBd0JDLGtCQUFxQixDQUFDQyw0QkFBNEIsQ0FBQzFCLFdBQVdzQixjQUFjcEIsVUFDcEd5QixlQUFlSCx1QkFBdUIsR0FBRztJQUUvQ3ZCLGNBQWMyQixlQUFlLENBQUNELGNBQWN6QjtJQUU1Q2tCLHVCQUF1QjtJQUV2QixJQUFJQSxzQkFBc0I7UUFDeEJsQixRQUFRZ0IsS0FBSyxDQUFDLEFBQUMsbUJBQTBERyxPQUF4Q1gsaUJBQWdCLDBCQUF3QyxPQUFoQlcsaUJBQWdCO0lBQzNGO0lBRUEsT0FBT0Q7QUFDVDtBQUVBLFNBQVNTLHdDQUF3QzdCLFNBQVMsRUFBRUMsYUFBYSxFQUFFQyxPQUFPO0lBQ2hGLElBQUk0QiwyQ0FBMkM7SUFFL0MsSUFBTTFCLFlBQVlKLFVBQVVLLFlBQVksSUFDbEMwQixRQUFRN0IsUUFBUThCLG9CQUFvQixDQUFDNUIsWUFDckM2QixRQUFRL0IsUUFBUWdDLG9CQUFvQixDQUFDOUIsWUFDckMrQixVQUFVakMsUUFBUWtDLHNCQUFzQixDQUFDaEMsWUFDekNpQyxhQUFhbkMsUUFBUW9DLHlCQUF5QixDQUFDbEMsWUFDL0NtQyw4QkFBK0JSLFNBQVNFLFNBQVNFLFdBQVdFO0lBRWxFLElBQUlFLGdDQUFnQyxNQUFNO1FBQ3hDLElBQU03QixrQkFBa0JDLElBQUFBLFlBQUksRUFBQ1gsWUFBVVMsU0FBUyxLQUMxQytCLG9DQUFvQ3BDLFVBQVVLLFNBQVM7UUFFN0RQLFFBQVFVLEtBQUssQ0FBQyxBQUFDLGlCQUF3RDRCLE9BQXhDOUIsaUJBQWdCLDBCQUEwRCxPQUFsQzhCLG1DQUFrQztRQUV6RyxJQUFNeEMsY0FBWUEsWUFBVWEsWUFBWSxJQUNsQ0MsYUFBYVosUUFBUWEsYUFBYSxJQUNsQ0MsZ0NBQWdDdUIsNEJBQTRCdEIsMkJBQTJCLENBQUNqQixhQUFXYyxZQUFZWjtRQUVySCxJQUFJYywrQkFBK0I7WUFDakMsSUFBTU0sZUFBZWxCLFVBQVVtQixlQUFlLElBQ3hDQyx3QkFBd0JDLGtCQUFxQixDQUFDQyw0QkFBNEIsQ0FBQzFCLGFBQVdzQixjQUFjcEIsVUFDcEd5QixlQUFlSCx1QkFBdUIsR0FBRztZQUUvQ3ZCLGNBQWMyQixlQUFlLENBQUNELGNBQWN6QjtZQUU1QzRCLDJDQUEyQztRQUM3QztRQUVBLElBQUlBLDBDQUEwQztZQUM1QzVCLFFBQVFnQixLQUFLLENBQUMsQUFBQyxtQkFBMERzQixPQUF4QzlCLGlCQUFnQiwwQkFBMEQsT0FBbEM4QixtQ0FBa0M7UUFDN0c7SUFDRjtJQUVBLE9BQU9WO0FBQ1Q7QUFFQSxJQUFNVyxjQUFjO0lBQ2xCMUM7SUFDQW9CO0lBQ0FVO0NBQ0Q7SUFFRCxXQUFlWSJ9